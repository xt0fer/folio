
// User human message who owns the archive
message User  {
	option (gorm.opts).ormable = true;
	uint32 id = 1;
	string Email = 2;     //string `gorm:"unique;not null"`
	string Firstname = 3; //string
    string Lastname = 4;  //string
    Asset Thumbnail = 14;
	//links
	// Account account = 6 ; //[(gorm.field).belongs_to = {}];
}



// // Archive is the container for a bunch of Folios
// message Archive  {
// 	option (gorm.opts).ormable = true;
// 	uint32 id = 1;
// 	string UUID = 2; //string `gorm:"unique;not null"`
// 	string Name = 3; //string
// 	string Desc = 4; //string
// 	// links
// 	repeated Folio  Folios = 6;
// 	//Account account = 7 ; //[(gorm.field).belongs_to = {}];
// 	User    owner = 8 ; //[(gorm.field).belongs_to = {}];
// }



// Share is a linkage allowing someone to work with the contents of a folio
message Share  { 
	option (gorm.opts).ormable = true;
	uint32 id = 1;
	User friend = 2;    // needs to be a PersonTag
    Asset Thumbnail = 14;
	repeated Folio folios  = 6 [(gorm.field).many_to_many = {}]; //Folios []*Folio `gorm:"many2many:folio_shares;"`
}

// Tag is a attribute on something
message Tag  {
	option (gorm.opts).ormable = true;
	uint32 id = 1;
	uint32 Kind = 2; // need an ENUM here
	string Label = 3;
	string Desc = 4;
	// links
	repeated Folio folios  = 6 [(gorm.field).many_to_many = {}]; //`gorm:"many2many:folio_tags;"`
    Asset Thumbnail = 14;
}



// // Person, Place, Thing, Category are the way things can be tagged.
// const (
// 	TagCategory Tagmessage = iota
// 	TagPerson
// 	TagPlace
// 	TagThing
// )

// Folio center piece
message Folio  {
	option (gorm.opts).ormable = true;
	uint32 id = 1;
	string UUID = 2;  //`gorm:"unique;not null;index:foliouuid"`
	string Name = 3;  //string
	string Desc = 4;  //string
    //Archive archive = 5;
	repeated Asset Assets = 6;
	repeated Note  Notes = 7;
    User Owner = 8;
	// links
	//Tags      []*Tag   `gorm:"many2many:folio_tags;"`
	repeated Tag tags = 10 [(gorm.field).many_to_many = {}];
	//Shares    []*Share `gorm:"many2many:folio_shares;"`
	repeated Share shares = 11 [(gorm.field).many_to_many = {}];
    Asset Thumbnail = 14;
}



// Asset main doc
message Asset  {
	option (gorm.opts).ormable = true;
	uint32 id = 1;
	string Name = 2;
	Folio folio = 3;
	string UUID = 4;  //`gorm:"unique;not null;index:foliouuid"`
	string Path = 5;  //string
	//Asset asset = 6;
	bytes blob = 20;
    Asset Thumbnail = 14;
}



// Note text junk
message Note  {
	option (gorm.opts).ormable = true;
	uint32 id = 1;
	string Name = 3;  //string
	string Note = 4;  //string
	Folio folio = 6;
    Asset Thumbnail = 14;
}

